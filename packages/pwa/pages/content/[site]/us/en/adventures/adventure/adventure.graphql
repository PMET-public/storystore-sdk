query ADVENTURE_QUERY(
  $path: String!
  $productsCategoryUID: String
  $includeProducts: Boolean = false
  $variation: String = "master"
) {
  # Get list of Categories in "Equipment" (UID "NDI=")
  categories(filters: { parent_category_uid: { eq: "NDI=" } }) {
    items {
      id: uid
      uid
      name
    }
  }

  adventureByPath(_path: $path, variation: $variation) {
    item {
      id: _path
      _path
      adventureTitle
      adventureType
      adventureActivity
      adventureTripLength
      adventureGroupSize
      adventureDifficulty
      adventurePrice
      adventureDescription {
        html
      }
      adventureItinerary {
        html
      }
      adventureGearList {
        html
      }
      adventurePrimaryImage {
        ... on ImageRef {
          id: _path
          _path
          width
          height
        }
      }

      # Contributor
      # You need to create this new Content Fragment first:
      # https://experienceleague.adobe.com/docs/experience-manager-learn/getting-started-with-aem-headless/graphql/multi-step/content-fragment-models.html?lang=en#create-a-contributor-model
      #
      # adventureContributor {
      #   ... on ContributorModel {
      #     id: _path
      #     _path
      #     fullName
      #     biographyText {
      #       html
      #     }
      #     occupation
      #     pictureReference {
      #       ... on ImageRef {
      #         id: _path
      #         _path
      #       }
      #     }
      #   }
      # }
    }
  }

  products(pageSize: 9, filter: { category_uid: { eq: $productsCategoryUID } }) @include(if: $includeProducts) {
    items {
      id: uid
      url_key
      name
      thumbnail {
        label
        url
      }
      categories {
        name
      }

      price_range {
        minimum_price {
          final_price {
            currency
            value
          }
          regular_price {
            value
          }
        }
        maximum_price {
          regular_price {
            value
          }
        }
      }
    }
  }

  moreAdventures: adventureList {
    items {
      id: _path
      _path
      adventureActivity
      adventureTitle
      adventureTripLength
      adventurePrimaryImage {
        ... on ImageRef {
          id: _path
          _path
          width
          height
        }
      }
    }
  }
}
